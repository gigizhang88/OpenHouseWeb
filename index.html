<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open House Sign-In</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .container {
            max-width: 800px;
        }
        .header {
            background-color: #2c8a4a;
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        .form-container {
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .required-field::after {
            content: "*";
            color: red;
            margin-left: 4px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container text-center">
            <h1>Open House Sign-In</h1>
            <p class="lead" id="propertyAddress">123 Sample Street, City, State ZIP</p>
        </div>
    </div>

    <div class="container mb-5">
        <div class="form-container">
            <form id="visitorForm" onsubmit="handleSubmit(event)">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="firstName" class="form-label required-field">First Name</label>
                        <input type="text" class="form-control" id="firstName" required>
                    </div>
                    <div class="col-md-6">
                        <label for="lastName" class="form-label required-field">Last Name</label>
                        <input type="text" class="form-control" id="lastName" required>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="email" class="form-label required-field">Email</label>
                        <input type="email" class="form-control" id="email" required>
                    </div>
                    <div class="col-md-6">
                        <label for="phone" class="form-label required-field">Phone</label>
                        <input type="tel" class="form-control" id="phone" required>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label required-field">Are you currently working with a real estate agent?</label>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="hasAgent" id="hasAgentYes" value="yes" required>
                        <label class="form-check-label" for="hasAgentYes">Yes</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="hasAgent" id="hasAgentNo" value="no">
                        <label class="form-check-label" for="hasAgentNo">No</label>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label required-field">Would you like to receive information about off-market listings?</label>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="offMarketInterest" id="offMarketYes" value="yes" required>
                        <label class="form-check-label" for="offMarketYes">Yes</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="offMarketInterest" id="offMarketNo" value="no">
                        <label class="form-check-label" for="offMarketNo">No</label>
                    </div>
                </div>

                <div class="mb-4">
                    <label for="comments" class="form-label">Additional Comments or Questions</label>
                    <textarea class="form-control" id="comments" rows="3"></textarea>
                </div>

                <button type="submit" class="btn btn-success w-100">Sign In</button>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function handleSubmit(event) {
            event.preventDefault();
            
            // Collect form data
            const formData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                hasAgent: document.querySelector('input[name="hasAgent"]:checked').value,
                offMarketInterest: document.querySelector('input[name="offMarketInterest"]:checked').value,
                comments: document.getElementById('comments').value,
                timestamp: new Date().toLocaleString()
            };

            // Convert to CSV row
            const csvRow = [
                formData.timestamp,
                formData.firstName,
                formData.lastName,
                formData.email,
                formData.phone,
                formData.hasAgent,
                formData.offMarketInterest,
                formData.comments
            ].map(field => `"${field}"`).join(',');

            // In a real application, you would:
            // 1. Send this data to a server to store in a database
            // 2. Append to a CSV file
            // 3. Send email notifications
            
            // For demonstration, we'll create a downloadable CSV
            downloadCSV(csvRow);

            // Show success message
            alert('Thank you for signing in!');
            
            // Reset form
            document.getElementById('visitorForm').reset();
        }

        function downloadCSV(csvRow) {
            // Create CSV headers if downloading for the first time
            let csvContent = "Timestamp,First Name,Last Name,Email,Phone,Has Agent,Interest in Off-Market,Comments\n";
            csvContent += csvRow + "\n";

            // Create download link
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            if (link.download !== undefined) {
                const url = URL.createObjectURL(blob);
                link.setAttribute("href", url);
                link.setAttribute("download", `open_house_sign_in_${new Date().toISOString().split('T')[0]}.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }

        // Function to update property address
        function updatePropertyAddress(address) {
            document.getElementById('propertyAddress').textContent = address;
        }

        updatePropertyAddress("123 Main Street, City, State ZIP");
    </script>
</body>
</html> 